---
sidebar: sidebar 
permalink: use/enable-acp.html 
keywords: Astra Control Provisioner install, acp, enable, astra trident upgrade, upgrade trident 
summary: 启用Asta Control配置程序以访问高级存储配置和管理功能。 
---
= 启用Asta Control配置程序
:hardbreaks:
:allow-uri-read: 
:icons: font
:imagesdir: ../media/use/


[role="lead"]
Astra Trident 23.10及更高版本提供了使用Astra Control配置程序的选项、允许获得许可的Astra Control用户访问高级存储配置功能。除了基于标准Asta三端CSI的功能之外、Asta Control配置程序还提供了此扩展功能。您可以使用此操作步骤启用和安装Astra控件配置程序。

您的Astra Control Service订阅会自动包含Astra Control配置程序使用的许可证。

在即将推出的Astra Control更新中、Astra Control配置程序将取代Astra Trandent作为存储配置程序和流程编排程序、并且Astra Control必须使用它。因此、强烈建议Asta Control用户启用Asta Control配置程序。Asta三元数据将继续保持开源状态、并使用NetApp的新CSI和其他功能进行发布、维护、支持和更新。

.如何知道是否需要启用Astra Control配置程序？
如果您向Astra Control Service添加的集群之前未安装Astra三项功能、则此集群将标记为 `Eligible`。你先请 link:../get-started/add-first-cluster.html["将集群添加到Asta Control"]，A作用 控制配置程序将自动启用。

集群未标记 `Eligible`，将被标记 `Partially eligible` 原因之一：

* 它使用的是旧版本的Asta三端到子
* 它使用的是A作用 于三端的23.10、但尚未启用配置程序选项
* 此集群类型不允许自动启用


适用于 `Partially eligible` 在某些情况下、请按照以下说明手动为集群启用Asta Control配置程序。

image:ac-acp-eligibility.png["屏幕截图显示了添加集群工作流中的集群资格"]

.在启用Astra Control配置程序之前
如果您现有的Asta Trident没有Asta Control配置程序、但要启用Asta Control配置程序、请首先执行以下操作：

* *如果您安装了Astra三端安装程序，请确认其版本在四个版本的窗口内*：如果您的Astra三端安装程序在版本24.02的四个版本窗口内，则可以使用Astra Control置备程序直接升级到Astra三端安装程序24.02。例如、您可以直接从Asta三端23.04升级到24.02。
* *确认集群具有一个AMD64*系统架构：Astra Control配置程序映像在amd64和ARM64 CPU架构中都提供，但Astra Control仅支持amd64。


.步骤
. 访问NetApp Astra控件映像注册表：
+
.. 登录到Astra Control Service UI并记录您的Astra Control帐户ID。
+
... 选择页面右上角的图图标。
... 选择* API访问*。
... 记下您的帐户ID。


.. 在同一页面中，选择*Generate API t令牌*并将API令牌字符串复制到剪贴板，然后将其保存在编辑器中。
.. 使用您的首选方法登录Astra Control注册表：
+
[source, docker]
----
docker login cr.astra.netapp.io -u <account-id> -p <api-token>
----
+
[source, crane]
----
crane auth login cr.astra.netapp.io -u <account-id> -p <api-token>
----


. (仅限自定义注册表)按照以下步骤将图像移动到自定义注册表。如果您不使用注册表、请按照中的三端修复操作符步骤进行操作 <<no-registry,下一节>>。
+

NOTE: 以下命令可以使用Podman、而不是Docker。如果您使用的是Windows环境、建议使用PowerShell。

+
[role="tabbed-block"]
====
.Docker
--
.. 从注册表中提取Asta Control配置程序映像：
+

NOTE: 提取的映像不支持多个平台、只支持与提取映像的主机相同的平台、例如Linux amd64。

+
[source, console]
----
docker pull cr.astra.netapp.io/trident-acp:24.02.0 --platform <cluster platform>
----
+
示例

+
[listing]
----
docker pull cr.astra.netapp.io/trident-acp:24.02.0 --platform linux/amd64
----
.. 标记图像：
+
[source, console]
----
docker tag cr.astra.netapp.io/trident-acp:24.02.0 <my_custom_registry>/trident-acp:24.02.0
----
.. 将映像推送到自定义注册表：
+
[source, console]
----
docker push <my_custom_registry>/trident-acp:24.02.0
----


--
.起重机
--
.. 将Asta Control配置程序清单复制到自定义注册表：
+
[source, crane]
----
crane copy cr.astra.netapp.io/trident-acp:24.02.0 <my_custom_registry>/trident-acp:24.02.0
----


--
====
. 确定原来的Asta Trdent安装方法是否使用。
. 使用您最初使用的安装方法在Asta Trdent中启用Asta Control配置程序：
+
<stdin>中未解析的指令-包括：：https://raw.githubusercontent.com/NetAppDocs/astra-control-center/main/_include/enable-acp-options-tabbed-block.adoc[]



.结果
Asta Control配置程序功能已启用、您可以使用当前运行的版本可用的任何功能。

安装Asta Control配置程序后、在Asta Control UI中托管此配置程序的集群将显示 `ACP version` 而不是 `Trident version` 字段和当前安装的版本号。

image:ac-acp-version.png["显示UI中ACP版本位置的屏幕截图"]

.有关详细信息 ...
* https://docs.netapp.com/us-en/trident/trident-managing-k8s/upgrade-operator-overview.html["Asta Trdent升级文档"^]

